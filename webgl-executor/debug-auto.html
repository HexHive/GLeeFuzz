<html>
    <head>
        <title>WebGL Fuzzer / Test Runner Under WebDriver</title>

    </head>

    <body>

    <script src="js/jquery-3.5.0.min.js"></script>
    <script src="js/test_runner.js" type="text/javascript"> </script>

    <div id="dashboard">
         WebGL program executor
    </div>

    Input Program: <input type="textarea" id="p_input"> </input> <br/>
    <input type="button" value="Execute" id="exec_btn"> </input>


    <script type="text/javascript">

      
      
      $(document).ready(
	  function() {

	      load_specs();

	      $("#exec_btn").click(function (e) {
		  var input_url = $("#p_input").val();
		  if (input_url.startsWith("http")) {
		      $.getJSON(input_url, function(program_str) {
			  run_a_test(program_str);
		      });
		  } else {
		      alert("invalid input url");
		  }      
	      });

	      // if there is a url passed in as url
	      const queryString = window.location.search;
	      console.log(queryString);
	      const urlParams = new URLSearchParams(queryString);
	      if (urlParams.has("arg")) {
		  arg = urlParams.get("arg");
		  input_url = atob(arg);
		  console.log("input_url", input_url);
		  if (input_url.startsWith("http")) {
		      $.getJSON(input_url, function(program_str) {
			  run_a_test(program_str);
		      });
		  } else {
		      alert("invalid data url");
		  }
	      }

	  }
      );

      function ff_crash_test0() {
	  window.location.href='https://www.khronos.org/registry/webgl/sdk/tests/conformance2/textures/misc/origin-clean-conformance-offscreencanvas.html?webglVersion=2&quiet=0&quick=1';
	  return 1234;
      }

      function ff_crash_test1() {
	  // window.location.href='https://www.khronos.org/registry/webgl/sdk/tests/conformance2/textures/misc/origin-clean-conformance-offscreencanvas.html?webglVersion=2&quiet=0&quick=1';
	  return 4321;
      }

    </script>



    <div id="canvas-container">

    </div>

    <img src="images/tiny.png" id="img_id"> </img>
    <video loop controls='true' src="videos/small.mp4" type="video/mp4" id="video_id"> </video>

    <div id="messages">
      messages come here
    </div>

    
    </body>

</html>
